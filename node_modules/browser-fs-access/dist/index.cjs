var e=function(){if("undefined"==typeof self)return!1;if("top"in self&&self!==top)try{top}catch(e){return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1}(),t=e?Promise.resolve().then(function(){return u}):Promise.resolve().then(function(){return P}),n=e?Promise.resolve().then(function(){return p}):Promise.resolve().then(function(){return w}),r=e?Promise.resolve().then(function(){return m}):Promise.resolve().then(function(){return k}),i=function(e){try{return Promise.resolve(e.getFile()).then(function(t){return t.handle=e,t})}catch(e){return Promise.reject(e)}},o=function(e){void 0===e&&(e=[{}]);try{Array.isArray(e)||(e=[e]);var t=[];return e.forEach(function(e,n){t[n]={description:e.description||"",accept:{}},e.mimeTypes?e.mimeTypes.map(function(r){t[n].accept[r]=e.extensions||[]}):t[n].accept["*/*"]=e.extensions||[]}),Promise.resolve(window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:t,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1})).then(function(t){return Promise.resolve(Promise.all(t.map(i))).then(function(t){return e[0].multiple?t:t[0]})})}catch(e){return Promise.reject(e)}},u={__proto__:null,default:o};function c(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return c=function(e){this.s=e,this.n=e.next},c.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new c(e)}function s(e,t,n){if(!e.s){if(n instanceof a){if(!n.s)return void(n.o=s.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(s.bind(null,e,t),s.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}var l=function e(t,n,r,i){try{var o=function(e){return Promise.resolve(Promise.all(l)).then(function(e){var t=e.flat();return Promise.resolve(Promise.all(v)).then(function(e){return[].concat(t,e)})})};void 0===r&&(r=t.name);var u,l=[],v=[],p=!1,d=!1,m=h(function(){return function(o,u){try{var h=function(){var o,u=function(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new c(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(t.values()),h=function(e,t,n){for(var r;;){var i=e();if(f(i)&&(i=i.v),!i)return o;if(i.then){r=0;break}var o=n();if(o&&o.then){if(!f(o)){r=1;break}o=o.s}if(t){var u=t();if(u&&u.then&&!f(u)){r=2;break}}}var c=new a,l=s.bind(null,c,2);return(0===r?i.then(v):1===r?o.then(h):u.then(p)).then(void 0,l),c;function h(r){o=r;do{if(t&&(u=t())&&u.then&&!f(u))return void u.then(p).then(void 0,l);if(!(i=e())||f(i)&&!i.v)return void s(c,1,o);if(i.then)return void i.then(v).then(void 0,l);f(o=n())&&(o=o.v)}while(!o||!o.then);o.then(h).then(void 0,l)}function v(e){e?(o=n())&&o.then?o.then(h).then(void 0,l):h(o):s(c,1,o)}function p(){(i=e())?i.then?i.then(v).then(void 0,l):v(i):s(c,1,o)}}(function(){return Promise.resolve(u.next()).then(function(e){return p=!(o=e).done})},function(){return!!(p=!1)},function(){var u=o.value,c=r+"/"+u.name;"file"===u.kind?v.push(u.getFile().then(function(e){return e.directoryHandle=t,e.handle=u,Object.defineProperty(e,"webkitRelativePath",{configurable:!0,enumerable:!0,get:function(){return c}})})):"directory"!==u.kind||!n||i&&i(u)||l.push(e(u,n,c,i))});if(h&&h.then)return h.then(function(){})}()}catch(e){return u(e)}return h&&h.then?h.then(void 0,u):h}(0,function(e){d=!0,u=e})},function(e,t){function n(n){if(e)throw t;return t}var r=h(function(){var e=function(){if(p&&null!=_iterator.return)return Promise.resolve(_iterator.return()).then(function(){})}();if(e&&e.then)return e.then(function(){})},function(e,t){if(d)throw u;if(e)throw t;return t});return r&&r.then?r.then(n):n()});return Promise.resolve(m&&m.then?m.then(o):o())}catch(e){return Promise.reject(e)}};const a=/*#__PURE__*/function(){function e(){}return e.prototype.then=function(t,n){const r=new e,i=this.s;if(i){const e=1&i?t:n;if(e){try{s(r,1,e(this.v))}catch(e){s(r,2,e)}return r}return this}return this.o=function(e){try{const i=e.v;1&e.s?s(r,1,t?t(i):i):n?s(r,1,n(i)):s(r,2,i)}catch(e){s(r,2,e)}},r},e}();function f(e){return e instanceof a&&1&e.s}function h(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}var v=function(e){void 0===e&&(e={});try{return e.recursive=e.recursive||!1,Promise.resolve(window.showDirectoryPicker({id:e.id,startIn:e.startIn})).then(function(t){return l(t,e.recursive,void 0,e.skipDirectory)})}catch(e){return Promise.reject(e)}},p={__proto__:null,default:v},d=function(e,t,n,r,i){void 0===t&&(t=[{}]),void 0===n&&(n=null),void 0===r&&(r=!1),void 0===i&&(i=null);try{var o=function(r){function o(t){return!n&&i&&i(),Promise.resolve(t.createWritable()).then(function(n){var r;function i(i){if(r)return i;var o=n.write;return Promise.resolve(e).then(function(e){return Promise.resolve(o.call(n,e)).then(function(){return Promise.resolve(n.close()).then(function(){return t})})})}var o=function(){if("stream"in e){var i=e.stream();return Promise.resolve(i.pipeTo(n)).then(function(){return r=1,t})}return function(){if("body"in e)return Promise.resolve(e.body.pipeTo(n)).then(function(){return r=1,t})}()}();return o&&o.then?o.then(i):i(o)})}return n?o(n):Promise.resolve(window.showSaveFilePicker({suggestedName:t[0].fileName,id:t[0].id,startIn:t[0].startIn,types:u,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1})).then(o)};Array.isArray(t)||(t=[t]),t[0].fileName=t[0].fileName||"Untitled";var u=[],c=null;e instanceof Blob&&e.type?c=e.type:e.headers&&e.headers.get("content-type")&&(c=e.headers.get("content-type")),t.forEach(function(e,t){u[t]={description:e.description||"",accept:{}},e.mimeTypes?(0===t&&c&&e.mimeTypes.push(c),e.mimeTypes.map(function(n){u[t].accept[n]=e.extensions||[]})):c&&(u[t].accept[c]=e.extensions||[])});var s=function(){if(n)return function(e,t){try{var r=Promise.resolve(n.getFile()).then(function(){})}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}(0,function(e){if(n=null,r)throw e})}();return Promise.resolve(s&&s.then?s.then(o):o())}catch(e){return Promise.reject(e)}},m={__proto__:null,default:d},y=function(e){void 0===e&&(e=[{}]);try{return Array.isArray(e)||(e=[e]),Promise.resolve(new Promise(function(t,n){var r=document.createElement("input");r.type="file";var i=[].concat(e.map(function(e){return e.mimeTypes||[]}),e.map(function(e){return e.extensions||[]})).join();r.multiple=e[0].multiple||!1,r.accept=i||"";var o=function(e){"function"==typeof u&&u(),t(e)},u=e[0].legacySetup&&e[0].legacySetup(o,function(){return u(n)},r);r.addEventListener("change",function(){o(r.multiple?Array.from(r.files):r.files[0])}),r.click()}))}catch(e){return Promise.reject(e)}},P={__proto__:null,default:y},b=function(e){void 0===e&&(e=[{}]);try{return Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,Promise.resolve(new Promise(function(t,n){var r=document.createElement("input");r.type="file",r.webkitdirectory=!0;var i=function(e){"function"==typeof o&&o(),t(e)},o=e[0].legacySetup&&e[0].legacySetup(i,function(){return o(n)},r);r.addEventListener("change",function(){var t=Array.from(r.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(t=t.filter(function(t){return t.webkitRelativePath.split("/").every(function(t){return!e[0].skipDirectory({name:t,kind:"directory"})})})):t=t.filter(function(e){return 2===e.webkitRelativePath.split("/").length}),i(t)}),r.click()}))}catch(e){return Promise.reject(e)}},w={__proto__:null,default:b},_=function(e,t){void 0===t&&(t={});try{var n=function(){return r.download=t.fileName||"Untitled",Promise.resolve(i).then(function(e){r.href=URL.createObjectURL(e);var n=function(){"function"==typeof i&&i()},i=t.legacySetup&&t.legacySetup(n,function(){return i()},r);return r.addEventListener("click",function(){setTimeout(function(){return URL.revokeObjectURL(r.href)},3e4),n()}),r.click(),null})};Array.isArray(t)&&(t=t[0]);var r=document.createElement("a"),i=e,o=function(){if("body"in e)return Promise.resolve(function(e,t){try{var n=e.getReader(),r=new ReadableStream({start:function(e){return function t(){try{return Promise.resolve(n.read().then(function(n){if(!n.done)return e.enqueue(n.value),t();e.close()}))}catch(e){return Promise.reject(e)}}()}}),i=new Response(r);return Promise.resolve(i.blob()).then(function(e){return n.releaseLock(),new Blob([e],{type:t})})}catch(e){return Promise.reject(e)}}(e.body,e.headers.get("content-type"))).then(function(e){i=e})}();return Promise.resolve(o&&o.then?o.then(n):n())}catch(e){return Promise.reject(e)}},k={__proto__:null,default:_};exports.directoryOpen=function(){try{var e=arguments;return Promise.resolve(n).then(function(t){return t.default.apply(t,[].slice.call(e))})}catch(e){return Promise.reject(e)}},exports.directoryOpenLegacy=b,exports.directoryOpenModern=v,exports.fileOpen=function(){try{var e=arguments;return Promise.resolve(t).then(function(t){return t.default.apply(t,[].slice.call(e))})}catch(e){return Promise.reject(e)}},exports.fileOpenLegacy=y,exports.fileOpenModern=o,exports.fileSave=function(){try{var e=arguments;return Promise.resolve(r).then(function(t){return t.default.apply(t,[].slice.call(e))})}catch(e){return Promise.reject(e)}},exports.fileSaveLegacy=_,exports.fileSaveModern=d,exports.supported=e;
