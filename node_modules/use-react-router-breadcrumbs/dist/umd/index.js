!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-router")):"function"==typeof define&&define.amd?define(["exports","react","react-router"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["react-router-breadcrumbs-hoc"]={},e.React,e.ReactRouter)}(this,(function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=n(t),a=function(e){return e.join("/").replace(/\/\/+/g,"/")},c=/^:\w+$/,i=function(e){return"*"===e};function u(e,t){var r=e.split("/"),n=r.length;return r.some(i)&&(n+=-2),t&&(n+=2),r.filter((function(e){return!i(e)})).reduce((function(e,t){return c.test(t)?e+3:""===t?e+1:e+10}),n)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e.forEach((function(e,o){var c;if("string"!=typeof e.path&&!e.index&&!(null===(c=e.children)||void 0===c?void 0:c.length))throw new Error("useBreadcrumbs: `path` or `index` must be provided in every route object");if(e.path&&e.index)throw new Error("useBreadcrumbs: `path` and `index` cannot be provided at the same time");var i={relativePath:e.path||"",childrenIndex:o,route:e};if("/"===i.relativePath.charAt(0)){if(!i.relativePath.startsWith(n))throw new Error("useBreadcrumbs: The absolute path of the child route must start with the parent path");i.relativePath=i.relativePath.slice(n.length)}var l=a([n,i.relativePath]),h=r.concat(i);if(e.children&&e.children.length>0){if(e.index)throw new Error("useBreadcrumbs: Index route cannot have child routes");s(e.children,t,h,l)}t.push({path:l,score:u(l,e.index),routesMeta:h})})),t}var l=Symbol("NO_BREADCRUMB"),h=function(e){return e.replace(/^[\s_]+|[\s_]+$/g,"").replace(/[-_\s]+/g," ").replace(/^[a-z]/,(function(e){return e.toUpperCase()}))},d=function(e){var r=e.breadcrumb,n=e.match,a=e.location,c=e.props,i=Object.assign({match:n,location:a,key:n.pathname},c||{});return Object.assign(Object.assign({},i),{breadcrumb:"string"==typeof r?t.createElement("span",{key:i.key},r):o.default.createElement(r,Object.assign({},i))})},p=function(e){var t,n=e.currentSection,o=e.disableDefaults,a=e.excludePaths,c=e.defaultFormatter,i=e.location,u=e.pathSection,s=e.branches;return a&&a.some((function(e){return null!=r.matchPath({path:e,end:!0},u)}))?l:(s.some((function(e){var a=e.path,s=e.routesMeta,p=s[s.length-1].route,f=p.breadcrumb;if(!f&&p.index){var m=s[s.length-2];m&&m.route.breadcrumb&&(f=m.route.breadcrumb)}var b=p.caseSensitive,v=p.props,g=r.matchPath({path:a,end:!0,caseSensitive:b},u);return g&&null===f?(t=l,!0):!!g&&(!f&&o?(t=l,!0):(t=d({breadcrumb:f||(c?c(n):h(n)),match:Object.assign(Object.assign({},g),{route:p}),location:i,props:v}),!0))})),t||(o?l:function(e){var t=e.currentSection,n=e.location,o=e.pathSection,a=e.defaultFormatter,c=r.matchPath({end:!0,path:o},o);return d({breadcrumb:a?a(t):h(t),match:c,location:n})}({pathSection:u,currentSection:"/"===u?"Home":n,location:i,defaultFormatter:c})))},f=function(e){var t=e.routes,r=e.location,n=e.options,o=void 0===n?{}:n,a=r.pathname,c=function(e){return e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((function(e,r){return e===t[r]}))?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(s(t)),i=[];return a.split("?")[0].split("/").reduce((function(e,t,n){var a=t?"".concat(e,"/").concat(t):"/";if("/"===a&&0!==n)return"";var u=p(Object.assign({currentSection:t,location:r,pathSection:a,branches:c},o));return u!==l&&i.push(u),"/"===a?"":a}),""),i};var m=r.Route;e.Route=m,e.createRoutesFromChildren=function e(t){var n=[];return o.default.Children.forEach(t,(function(t){if(o.default.isValidElement(t))if(t.type!==o.default.Fragment){!function(e,t){if(!e)throw new Error(t)}(t.type===r.Route,"[".concat("string"==typeof t.type?t.type:t.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>"));var a={caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path,breadcrumb:t.props.breadcrumb};t.props.children&&(a.children=e(t.props.children)),n.push(a)}else n.push.apply(n,e(t.props.children))})),n},e.default=function(e,t){return f({routes:e||[],location:r.useLocation(),options:t})},e.getBreadcrumbs=f,e.humanize=h,Object.defineProperty(e,"__esModule",{value:!0})}));
